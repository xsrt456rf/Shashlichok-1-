<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>–®–∞—à–ª—ã—á–æ–∫ ‚Ññ1 –•–∞–ª–∞–ª ‚Äî –û–Ω–ª–∞–π–Ω-–º–µ–Ω—é</title>
<style>
:root{
  --bg:#fafafa; --card:#fff; --muted:#6b7280;
  --accent:#d35400; --accent-2:#ff6b2d; --green:#10b981;
  --shadow: 0 8px 30px rgba(16,24,40,0.08);
  /* —É–≤–µ–ª–∏—á–∏–ª –±–∞–∑–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ */
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  --base-size: 18px; /* –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–∑–º–µ—Ä ‚Äî –∏—Å–ø–æ–ª—å–∑—É—é —á–µ—Ä–µ–∑ calc */
}
*{box-sizing:border-box}
html { font-size: 100%; } /* keep responsive */
body{
  margin:0; background:linear-gradient(180deg,#fff 0%,var(--bg) 100%);
  color:#111; -webkit-font-smoothing:antialiased; padding-top:96px;
  line-height:1.35;
  font-size: calc(var(--base-size));
}

/* HEADER (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π) */
.header {
  position:fixed; left:0; right:0; top:0; height:96px;
  background:linear-gradient(90deg,var(--accent),var(--accent-2));
  color:white; display:flex; align-items:center; justify-content:center;
  box-shadow:0 6px 20px rgba(0,0,0,0.12); z-index:40;
  padding:14px 22px;
  animation: slideDown .4s ease;
}
.header-inner{ max-width:1200px; width:100%; display:flex; align-items:center; justify-content:space-between; gap:14px; }
.brand{display:flex; align-items:center; gap:14px;}
.logo{
  width:64px;height:64px;border-radius:12px;background:rgba(255,255,255,0.12);
  display:flex;align-items:center;justify-content:center;font-weight:800;font-size:20px;
}
.title{font-size:22px;font-weight:800}
.phone{font-size:20px;font-weight:900; letter-spacing:0.6px}
.delivery{font-size:15px; opacity:0.96}

/* LAYOUT */
.wrap{max-width:1100px;margin:32px auto;display:grid;grid-template-columns:1fr 380px;gap:26px;padding:0 20px;}
@media (max-width:980px){ .wrap{grid-template-columns:1fr;padding:0 12px} }

/* MENU CARDS */
.menu{display:grid;grid-template-columns:repeat(2,1fr);gap:18px}
.card{
  background:var(--card);border-radius:14px;padding:14px;box-shadow:var(--shadow);
  display:flex;gap:14px;align-items:flex-start; animation:fadeIn .36s ease;
}
.img{width:140px;height:106px;border-radius:12px;background:#f5f5f5;display:flex;align-items:center;justify-content:center;border:1px solid #eee}
.info{flex:1}
.dish-name{font-weight:800;margin:0 0 8px; font-size:20px}
.dish-desc{color:var(--muted);font-size:15px;margin:0 0 10px}
.row{display:flex;align-items:center;justify-content:space-between;gap:10px}
.price{font-weight:900;color:var(--accent); font-size:18px}

/* BUTTONS */
.btn{
  background:linear-gradient(180deg,var(--accent),var(--accent-2));
  color:white;padding:10px 14px;border-radius:12px;border:0;cursor:pointer;font-weight:800;font-size:15px;
}
.btn.ghost{background:transparent;color:var(--accent);border:1px solid rgba(255,255,255,0.12)}
.btn:active{transform:translateY(1px)}

/* SIDEBAR CART */
.cart{background:#fff;padding:18px;border-radius:14px;box-shadow:var(--shadow);position:sticky; top:120px}
.cart h3{margin:0 0 12px 0; font-size:20px}
.cart-list{max-height:420px;overflow:auto;margin-bottom:12px}
.cart-item{display:flex;align-items:center;gap:12px;padding:10px 6px;border-bottom:1px dashed #f0f0f0}
.ci-name{font-weight:700; font-size:16px}
.qty{display:inline-flex;align-items:center;border-radius:8px;overflow:hidden;border:1px solid #eee}
.qty button{width:38px;height:36px;border:0;background:#fafafa;cursor:pointer;font-size:18px}
.qty span{display:inline-block;padding:0 10px;min-width:36px;text-align:center;font-weight:700}
.total{display:flex;justify-content:space-between;align-items:center;font-weight:900;margin-top:10px;font-size:18px}
.checkout{margin-top:14px;display:flex;gap:10px}
.empty{text-align:center;color:var(--muted);padding:22px;font-size:15px}

/* MODAL */
.modal-bg{position:fixed;inset:0;background:rgba(0,0,0,0.52);display:flex;align-items:center;justify-content:center;z-index:60}
.modal{background:white;padding:22px;border-radius:12px;max-width:520px;width:92%;box-shadow:0 14px 50px rgba(0,0,0,0.28);animation:modalIn .28s cubic-bezier(.16,1,.3,1)}
.modal h4{margin:0 0 8px 0;font-size:20px}
.modal p{font-size:15px}
.close-x{position:absolute;right:12px;top:10px;background:transparent;border:0;font-weight:700;font-size:18px;cursor:pointer}

/* small */
@media (max-width:680px){
  .dish-name{font-size:18px}
  .title{font-size:20px}
  .phone{font-size:18px}
  .logo{width:56px;height:56px;font-size:18px}
  .cart{position:static; margin-top:12px}
}

/* ANIMATIONS */
@keyframes fadeIn { from{opacity:0; transform:translateY(8px)} to{opacity:1; transform:none} }
@keyframes modalIn { from{opacity:0; transform:translateY(10px) scale(.98)} to{opacity:1; transform:none} }
@keyframes slideDown { from{opacity:0; transform:translateY(-8px)} to{opacity:1; transform:none} }

</style>
</head>
<body>

<!-- FIXED HEADER WITH PHONE + DELIVERY -->
<header class="header" role="banner" aria-label="–®–∞–ø–∫–∞ —Å–∞–π—Ç–∞">
  <div class="header-inner">
    <div class="brand" aria-hidden="false">
      <div class="logo">–®‚Ññ1</div>
      <div>
        <div class="title">–®–∞—à–ª—ã—á–æ–∫ ‚Ññ1 –•–∞–ª–∞–ª</div>
        <div class="delivery">–î–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –≤—Å–µ–π –ê—Å—Ç–∞–Ω–µ üöö</div>
      </div>
    </div>

    <!-- PHONE placed clearly at top, clickable -->
    <div style="display:flex;flex-direction:column;align-items:flex-end;gap:6px">
      <a id="phoneLink" class="phone" href="#" style="color:white;text-decoration:none"></a>
      <div style="font-size:13px;opacity:0.95">–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∑–≤–æ–Ω–∏—Ç—å</div>
    </div>
  </div>
</header>

<!-- MAIN LAYOUT -->
<div class="wrap" role="main">
  <!-- Menu -->
  <main>
    <div style="margin-bottom:12px;color:var(--muted); font-size:16px">–ö–∞—Ç–µ–≥–æ—Ä–∏—è: –ü–æ–ø—É–ª—è—Ä–Ω–æ–µ</div>
    <div id="menu" class="menu" aria-live="polite"></div>
  </main>

  <!-- Cart -->
  <aside>
    <div class="cart" aria-label="–ö–æ—Ä–∑–∏–Ω–∞">
      <h3>–ö–æ—Ä–∑–∏–Ω–∞</h3>
      <div id="cartList" class="cart-list">
        <div id="emptyMsg" class="empty">–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div>
      </div>

      <div class="total">
        <div>–ò—Ç–æ–≥–æ</div>
        <div id="total">0 ‚Ç∏</div>
      </div>

      <div class="checkout">
        <button id="orderBtn" class="btn" disabled>–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
        <button id="clearCart" class="btn" style="background:transparent;color:var(--accent);border:1px solid #f1f1f1">–û—á–∏—Å—Ç–∏—Ç—å</button>
      </div>
    </div>
  </aside>
</div>

<script>
/* ========== DATA ========== */
const dishes = [
  { id:1, name:"–®–∞—à–ª—ã–∫ –∏–∑ –∫—É—Ä–∏—Ü—ã", desc:"–°–æ—á–Ω—ã–π –∫—É—Ä–∏–Ω—ã–π —à–∞—à–ª—ã–∫ –Ω–∞ —É–≥–ª—è—Ö", price:1500 },
  { id:2, name:"–®–∞—à–ª—ã–∫ –∏–∑ –±–∞—Ä–∞–Ω–∏–Ω—ã", desc:"–ê—Ä–æ–º–∞—Ç–Ω—ã–π –±–∞—Ä–∞–Ω–∏–π —à–∞—à–ª—ã–∫", price:2000 },
  { id:3, name:"–õ—é–ª—è-–∫–µ–±–∞–±", desc:"–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –ª—é–ª—è-–∫–µ–±–∞–± –Ω–∞ –º–∞–Ω–≥–∞–ª–µ", price:1800 },
  { id:4, name:"–°–∞–ª–∞—Ç –•–∞–ª–∞–ª", desc:"–°–≤–µ–∂–∏–µ –æ–≤–æ—â–∏ –∏ –∑–∞–ø—Ä–∞–≤–∫–∞", price:800 },
  { id:5, name:"–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å –ø–æ-–¥–µ—Ä–µ–≤–µ–Ω—Å–∫–∏", desc:"–•—Ä—É—Å—Ç—è—â–∏–π –∏ –ø—Ä—è–Ω—ã–π", price:400 },
];

/* ========== STATE ========== */
const cart = {};

/* ========== ELEMENTS ========== */
const menuEl = document.getElementById('menu');
const cartList = document.getElementById('cartList');
const totalEl = document.getElementById('total');
const orderBtn = document.getElementById('orderBtn');
const emptyMsg = document.getElementById('emptyMsg');
const phoneLink = document.getElementById('phoneLink');
const clearCartBtn = document.getElementById('clearCart');

/* ========== HELPERS ========== */
function money(n){ return n.toLocaleString('ru-RU') + ' ‚Ç∏'; }
function escapeHtml(s){ return String(s).replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;'); }

/* –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –Ω–æ–º–µ—Ä–∞ —Ñ–æ—Ä–º–∞—Ç–∞ +7 7XX XXX XX XX */
function randomKazPhone(){
  const three = Math.floor(100 + Math.random()*900); // 100-999
  const b = Math.floor(100 + Math.random()*900);
  const c = Math.floor(10 + Math.random()*90);
  const d = Math.floor(10 + Math.random()*90);
  const part1 = three; // e.g. 705
  const part2 = String(b).padStart(3,'0'); // 3 digits
  const part3 = String(c).padStart(2,'0');
  const part4 = String(d).padStart(2,'0');
  return `+7 ${part1} ${part2} ${part3} ${part4}`;
}

/* –°—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è tel: —É–±–∏—Ä–∞—è –ø—Ä–æ–±–µ–ª—ã */
function telHref(phone){
  return 'tel:' + phone.replace(/\s+/g,'').replace(/\+/g,'%2B');
}

/* ========== RENDER MENU ========== */
function svgPlaceholder(){
  return `<svg viewBox="0 0 24 24" width="88" height="88" aria-hidden="true"><rect x="2" y="3" width="20" height="14" rx="3" fill="#fff"/><path d="M6 10c1.333-1 2.667-4 4-4 1.333 0 2.667 3 4 4" stroke="#f97316" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><path d="M19 3l-6 6" stroke="#ff8a4b" stroke-width="1.8" stroke-linecap="round"/></svg>`;
}

function renderMenu(){
  menuEl.innerHTML = '';
  for(const d of dishes){
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <div class="img">${svgPlaceholder()}</div>
      <div class="info">
        <div class="dish-name">${escapeHtml(d.name)}</div>
        <div class="dish-desc">${escapeHtml(d.desc)}</div>
        <div class="row">
          <div class="price">${money(d.price)}</div>
          <div><button class="btn" data-add="${d.id}">–î–æ–±–∞–≤–∏—Ç—å</button></div>
        </div>
      </div>
    `;
    menuEl.appendChild(card);
  }
}

/* ========== RENDER CART ========== */
function renderCart(){
  cartList.innerHTML = '';
  const keys = Object.keys(cart);
  if(keys.length === 0){
    emptyMsg.style.display = 'block';
    totalEl.textContent = money(0);
    orderBtn.disabled = true;
    return;
  }
  emptyMsg.style.display = 'none';
  let total = 0;
  for(const id of keys){
    const dish = dishes.find(x=>x.id==id);
    const qty = cart[id];
    const line = dish.price * qty;
    total += line;
    const row = document.createElement('div');
    row.className = 'cart-item';
    row.innerHTML = `
      <div style="flex:1">
        <div class="ci-name">${escapeHtml(dish.name)}</div>
        <div style="font-size:14px;color:var(--muted)">${money(dish.price)} √ó ${qty} = ${money(line)}</div>
      </div>
      <div class="qty" role="group" aria-label="–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ">
        <button data-dec="${dish.id}" aria-label="—É–±–∞–≤–∏—Ç—å">‚àí</button>
        <span>${qty}</span>
        <button data-inc="${dish.id}" aria-label="–ø—Ä–∏–±–∞–≤–∏—Ç—å">+</button>
      </div>
    `;
    cartList.appendChild(row);
  }
  totalEl.textContent = money(total);
  orderBtn.disabled = false;
}

/* ========== CART OPS ========== */
function addToCart(id, delta=1){
  if(!cart[id]) cart[id]=0;
  cart[id] += delta;
  if(cart[id] <= 0) delete cart[id];
  renderCart();
}

/* ========== EVENTS ========== */
menuEl.addEventListener('click', e=>{
  const id = e.target.dataset.add;
  if(id) addToCart(id,1);
});
cartList.addEventListener('click', e=>{
  if(e.target.dataset.inc) addToCart(e.target.dataset.inc,1);
  if(e.target.dataset.dec) addToCart(e.target.dataset.dec,-1);
});
clearCartBtn.addEventListener('click', ()=>{
  for(const k of Object.keys(cart)) delete cart[k];
  renderCart();
});

/* ========== ORDER FLOW ========== */
function createModal(html){
  const bg = document.createElement('div');
  bg.className = 'modal-bg';
  bg.innerHTML = `<div class="modal">${html}</div>`;
  document.body.appendChild(bg);
  bg.addEventListener('click', (ev)=>{ if(ev.target===bg) bg.remove(); });
  return bg;
}

orderBtn.addEventListener('click', ()=>{
  // –°–æ–±–∏—Ä–∞–µ–º –∑–∞–∫–∞–∑
  const items = Object.keys(cart).map(id=>{
    const d = dishes.find(x=>x.id==id);
    return `${d.name} x${cart[id]}`;
  }).join('\n');

  // –¢–µ–∫—É—â–∏–π —Ç–µ–ª–µ—Ñ–æ–Ω –∏–∑ —Ö–µ–¥–µ—Ä–∞
  const phoneText = phoneLink.dataset.number || phoneLink.textContent || '';

  const html = `
    <h4>–ó–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç</h4>
    <p style="color:var(--muted)">–ú—ã —Å–≤—è–∂–µ–º—Å—è –ø–æ –Ω–æ–º–µ—Ä—É:</p>
    <div style="font-size:20px;font-weight:900;margin:8px 0">${escapeHtml(phoneText)}</div>
    <p style="font-size:15px;color:var(--muted);white-space:pre-line">${escapeHtml(items)}</p>
    <div style="margin-top:14px;display:flex;gap:10px">
      <button id="modalOk" class="btn" style="flex:1">–û–∫</button>
      <button id="modalCall" class="btn" style="flex:1;background:#fff;color:var(--accent);border:1px solid #fee2d0">–ü–µ—Ä–µ–∑–≤–æ–Ω–∏—Ç—å</button>
    </div>
  `;
  const modal = createModal(html);
  document.getElementById('modalOk').onclick = ()=> { modal.remove(); for(const k of Object.keys(cart)) delete cart[k]; renderCart(); };
  document.getElementById('modalCall').onclick = ()=> { window.location.href = telHref(phoneText); };
});

/* ========== INIT HEADER PHONE ========== */
(function initPhone(){
  const phone = randomKazPhone(); // +7 7XX XXX XX XX
  phoneLink.textContent = phone;
  phoneLink.href = telHref(phone);
  phoneLink.dataset.number = phone;
})();

/* ========== HELPERS ========== */
function telHref(phone){
  return 'tel:' + phone.replace(/\s+/g,'').replace(/\+/g,'%2B');
}
function randomKazPhone(){
  const three = Math.floor(100 + Math.random()*900); // 100-999
  const b = Math.floor(100 + Math.random()*900);
  const c = Math.floor(10 + Math.random()*90);
  const d = Math.floor(10 + Math.random()*90);
  const part1 = three;
  const part2 = String(b).padStart(3,'0');
  const part3 = String(c).padStart(2,'0');
  const part4 = String(d).padStart(2,'0');
  return `+7 ${part1} ${part2} ${part3} ${part4}`;
}

/* ========== INITIAL RENDER ========== */
function svgPlaceholder(){
  return `<svg viewBox="0 0 24 24" width="88" height="88" aria-hidden="true"><rect x="2" y="3" width="20" height="14" rx="3" fill="#fff"/><path d="M6 10c1.333-1 2.667-4 4-4 1.333 0 2.667 3 4 4" stroke="#f97316" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><path d="M19 3l-6 6" stroke="#ff8a4b" stroke-width="1.8" stroke-linecap="round"/></svg>`;
}

function renderMenu(){
  menuEl.innerHTML = '';
  for(const d of dishes){
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <div class="img">${svgPlaceholder()}</div>
      <div class="info">
        <div class="dish-name">${escapeHtml(d.name)}</div>
        <div class="dish-desc">${escapeHtml(d.desc)}</div>
        <div class="row">
          <div class="price">${money(d.price)}</div>
          <div><button class="btn" data-add="${d.id}">–î–æ–±–∞–≤–∏—Ç—å</button></div>
        </div>
      </div>
    `;
    menuEl.appendChild(card);
  }
}

renderMenu();
renderCart();
</script>
</body>
</html>
